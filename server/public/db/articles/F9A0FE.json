{"fid":"F9A0FE","title":"javascript实战","author":"徐小夕","face_img":"http://49.234.61.19:3000/uploads/logo_1766f9c8c17.svg","label":["前端","javascript","设计"],"ct":1607932814717,"ut":1608194242642,"type":1,"desc":"有点意思的学习社区开始啦, 可以感受一下","visible":1,"content":"## 前言\n这是一个很基础的实战文章, 欢迎大家欣赏,学习.\n\n## 正文\n这是一个javascript基础文章, 包括算法等.\ncookie是一种报文头信息，请求报文和响应报文中都可以有cookie，key-value的形式，主要用来识别用户身份。\n　　cookie中的session是指会话，浏览器会话是指浏览器与服务器建立一次会话，关闭浏览器使得会话结束，此时session与cookie同时失效。与cookie有关的session，是指expires，默认为session，也就是cookie有效期，会话结束cookie失效。\n\n朴灵大神的《深入浅出nodejs》中对cookie进行了很精辟的讲解：\n\n由于HTTP是无状态协议，所以需要cookie来区分用户之间的身份。最新规范RFC6265中，定义cookie是一个由浏览器和服务器共同协作实现的规范。\nCookie的处理分为以下几步：\n1.服务器向客户端发送cookie（我说怎么前端很少会用到cookie...）\n2.浏览器将Cookie保存（后端设置expires或者maxAge，cookie有效期由后端来决定，默认为session）\n3.之后每次浏览器都会讲Cookie发向服务器。（有效期内是这样）\n\n客户端发送的Cookie在请求报文的Cookie字段中，我们可以使用curl来构造这个字段，如下所示：\n\nexpires/Max-Age 字段为此cookie超时时间。若设置其值为一个时间，那么当到达此时间后，此cookie失效。不设置的话默认值是Session，意思是cookie会和session一起失效。当浏览器关闭(不是浏览器标签页，而是整个浏览器) 后，此cookie失效。\n\n2.浏览器如何将cookie保存？（根据后端设置决定保存与否，需要在cookie有效期内）\n根据expires/MAX-AGE来保存。\n现在的cookie生存周期只是一个session，也就是整个浏览器会话（单个tab标签页关闭Cookie依旧保存）\n首次建立会话，只有response headers中有cookie.\n\n第二次建立会话，request headers中也有cookie\n\n3.如何设置expires？（后端设置，koa2，基于cookie.js模块）\n可能需要依赖redis，可能需要 koa2。\n先不管redis，使用koa2来修改cookie有效时间。\n先尝试原生方式，没有原生方式。\nkoa2方式成功。\n\n## 最后\n欢迎\n\n## 更多推荐\nkdaljak\n\n甲方你打的卡\n\n福卡戴珊\n\n附近的撒了倒计时\n\n附近火山口附近打开\n\n附近啊空间的卡\n\n## 最后\n\n附近的山东快书\n\n甲方的卡\n\n## 张杰\n\n附近开始发神经\n\n法律的框架啊开发阶段\n\n附近的卡家\n","html":"<h2 id=\"前言\">前言</h2>\n<p>这是一个很基础的实战文章, 欢迎大家欣赏,学习.</p>\n<h2 id=\"正文\">正文</h2>\n<p>这是一个javascript基础文章, 包括算法等.\ncookie是一种报文头信息，请求报文和响应报文中都可以有cookie，key-value的形式，主要用来识别用户身份。\n　　cookie中的session是指会话，浏览器会话是指浏览器与服务器建立一次会话，关闭浏览器使得会话结束，此时session与cookie同时失效。与cookie有关的session，是指expires，默认为session，也就是cookie有效期，会话结束cookie失效。</p>\n<p>朴灵大神的《深入浅出nodejs》中对cookie进行了很精辟的讲解：</p>\n<p>由于HTTP是无状态协议，所以需要cookie来区分用户之间的身份。最新规范RFC6265中，定义cookie是一个由浏览器和服务器共同协作实现的规范。\nCookie的处理分为以下几步：\n1.服务器向客户端发送cookie（我说怎么前端很少会用到cookie...）\n2.浏览器将Cookie保存（后端设置expires或者maxAge，cookie有效期由后端来决定，默认为session）\n3.之后每次浏览器都会讲Cookie发向服务器。（有效期内是这样）</p>\n<p>客户端发送的Cookie在请求报文的Cookie字段中，我们可以使用curl来构造这个字段，如下所示：</p>\n<p>expires/Max-Age 字段为此cookie超时时间。若设置其值为一个时间，那么当到达此时间后，此cookie失效。不设置的话默认值是Session，意思是cookie会和session一起失效。当浏览器关闭(不是浏览器标签页，而是整个浏览器) 后，此cookie失效。</p>\n<p>2.浏览器如何将cookie保存？（根据后端设置决定保存与否，需要在cookie有效期内）\n根据expires/MAX-AGE来保存。\n现在的cookie生存周期只是一个session，也就是整个浏览器会话（单个tab标签页关闭Cookie依旧保存）\n首次建立会话，只有response headers中有cookie.</p>\n<p>第二次建立会话，request headers中也有cookie</p>\n<p>3.如何设置expires？（后端设置，koa2，基于cookie.js模块）\n可能需要依赖redis，可能需要 koa2。\n先不管redis，使用koa2来修改cookie有效时间。\n先尝试原生方式，没有原生方式。\nkoa2方式成功。</p>\n<h2 id=\"最后\">最后</h2>\n<p>欢迎</p>\n<h2 id=\"更多推荐\">更多推荐</h2>\n<p>kdaljak</p>\n<p>甲方你打的卡</p>\n<p>福卡戴珊</p>\n<p>附近的撒了倒计时</p>\n<p>附近火山口附近打开</p>\n<p>附近啊空间的卡</p>\n<h2 id=\"最后-1\">最后</h2>\n<p>附近的山东快书</p>\n<p>甲方的卡</p>\n<h2 id=\"张杰\">张杰</h2>\n<p>附近开始发神经</p>\n<p>法律的框架啊开发阶段</p>\n<p>附近的卡家</p>\n"}